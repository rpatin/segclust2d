<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1 - Preparing data for Segmentation/Clustering with segclust2d • segclust2d</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="1 - Preparing data for Segmentation/Clustering with segclust2d">
<meta property="og:description" content="segclust2d">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">segclust2d</a>
<<<<<<< HEAD
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.1</span>
=======
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
>>>>>>> 8369989d4e00820d02671d09f20a9088aeee9a35
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v01_preparing_data.html">1 - Preparing data for Segmentation/Clustering with segclust2d</a>
    </li>
    <li>
      <a href="../articles/v02_run_segclust2d.html">2 - Running Segmentation/Clustering with segclust2d</a>
    </li>
    <li>
      <a href="../articles/v03_explore_outputs.html">3 - Exploring Outputs from segclust2d</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rpatin/segclust2d/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1 - Preparing data for Segmentation/Clustering
with segclust2d</h1>
                        <h4 data-toc-skip class="author">R. Patin</h4>
            
            <h4 data-toc-skip class="date">2022-09-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rpatin/segclust2d/blob/HEAD/vignettes/v01_preparing_data.Rmd" class="external-link"><code>vignettes/v01_preparing_data.Rmd</code></a></small>
      <div class="hidden name"><code>v01_preparing_data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rpatin/segclust2d" class="external-link">segclust2d</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">simulshift</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">simulmode</span><span class="op">)</span></span>
<span><span class="va">simulmode</span><span class="op">$</span><span class="va">abs_spatial_angle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">simulmode</span><span class="op">$</span><span class="va">spatial_angle</span><span class="op">)</span></span>
<span><span class="va">simulmode</span> <span class="op">&lt;-</span> <span class="va">simulmode</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">simulmode</span><span class="op">$</span><span class="va">abs_spatial_angle</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<p>This summary provides information on:</p>
<ul>
<li><a href="#type-of-data-accepted-and-content-required-to-run-segmentation-or-segclust-">The
type of data accepted by the function</a></li>
<li><a href="#limitations-on-data-size-and-subsampling-1">Advice on
subsampling</a></li>
<li><a href="#covariate-calculations-1">Guide to covariate
calculations</a></li>
<li>
<a href="#advice-on-data-pre-processing-1">Advice on data
preprocessing</a>, with an emphasis on typical errors that may arise due
to data interpolation.</li>
</ul>
<div class="section level2">
<h2 id="type-of-data-accepted-and-content-required-to-run-segmentation-or-segclust">Type of data accepted and content required to run segmentation() or
segclust()<a class="anchor" aria-label="anchor" href="#type-of-data-accepted-and-content-required-to-run-segmentation-or-segclust"></a>
</h2>
<p>Right now, the function in <code>segclust2d</code> package accept
three different kind of input data:</p>
<ul>
<li><a href="#data-frame">data.frame</a></li>
<li>
<a href="#move">Move</a> objects based on package <a href="https://CRAN.R-project.org/package=move" class="external-link"><code>move</code></a>
</li>
<li>
<a href="#ltraj">ltraj</a> objects based on package <a href="https://CRAN.R-project.org/package=adehabitatLT" class="external-link"><code>adehabitatLT</code></a>
</li>
</ul>
<p>Future version may provide support for <code>sftraj</code> objects as
well.</p>
<div class="section level3">
<h3 id="data-frame">data.frame<a class="anchor" aria-label="anchor" href="#data-frame"></a>
</h3>
<p>data.frame is the format natively supported by
<code><a href="../reference/segmentation.html">segmentation()</a></code> and <code><a href="../reference/segclust.html">segclust()</a></code>. If
<code>x_data.frame</code> is a data frame, the syntax is simply:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">x_data.frame</span>, lmin <span class="op">=</span> <span class="fl">5</span>, Kmax <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="move">Move<a class="anchor" aria-label="anchor" href="#move"></a>
</h3>
<p><code>Move</code> object can alternatively be provided to the
function. If using <code><a href="../reference/segmentation.html">segmentation()</a></code>, the user may omit
<code>seg.var</code> argument and the algorithm will use the movement
coordinates as segmentation variables. Alternatively if the user
specifies the segmented variable with argument <code>seg.var</code>,
those variables must be present in the data associated to the
<code>Move</code> object <code>x_move@data</code> If <code>x_move</code>
is a <code>Move</code> object, the syntax is simply:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">x_move</span>, lmin <span class="op">=</span> <span class="fl">5</span>, Kmax <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ltraj">ltraj<a class="anchor" aria-label="anchor" href="#ltraj"></a>
</h3>
<p><code>ltraj</code> object can alternatively be provided to the
function. If using <code><a href="../reference/segmentation.html">segmentation()</a></code>, the user may omit
<code>seg.var</code> argument and the algorithm will use the movement
coordinates as segmentation variables. Alternatively if the user
specifies the segmented variable with argument <code>seg.var</code>,
those variables must be present in the data associated to the
<code>ltraj</code> object <code>x_ltraj@data</code> If
<code>x_ltraj</code> is a <code>ltraj</code> object, the syntax is
simply:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">x_ltraj</span>, lmin <span class="op">=</span> <span class="fl">5</span>, Kmax <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sftraj">sftraj<a class="anchor" aria-label="anchor" href="#sftraj"></a>
</h3>
<p><code>sftraj</code> objects are not supported for the moment.</p>
</div>
</div>
<div class="section level2">
<h2 id="limitations-on-data-size-and-subsampling">Limitations on data size and subsampling<a class="anchor" aria-label="anchor" href="#limitations-on-data-size-and-subsampling"></a>
</h2>
<p>Computation cost for the algorithm scales non-linearly and can be
both memory and time-consuming. Performance depends on computer, but
from what we have tested, a segmentation on data of size &gt; 10000 can
be quite memory intensive (more than 10Go of RAM) and
segmentation-clustering can be quite long for data &gt; 1000 (few
minutes to hours). For such dataset we recommend either subsampling if
loosing resolution is not a big deal (looking for home-range changes
over a year with hourly points might be a lost of time when daily points
are sufficient) or splitting the dataset for very long data. Although
for segmentation-clustering, clusters will not be easily comparable
between the different part of the dataset, if one provides parts where
all cluster are present for sure, there should be no problem.</p>
<div class="section level3">
<h3 id="subsampling-options">Subsampling options<a class="anchor" aria-label="anchor" href="#subsampling-options"></a>
</h3>
<div class="section level4">
<h4 id="disabling-automatic-subsampling">Disabling automatic subsampling<a class="anchor" aria-label="anchor" href="#disabling-automatic-subsampling"></a>
</h4>
<p>Subsampling is automatically enabled in the function to avoid
unwanted memory saturation or very long computation time. By default
argument <code>subsample</code> is set to <code>TRUE</code>. In order to
totally disable subsampling you have to provide argument
<code>subsample</code> :</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shiftseg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">simulshift</span>,</span>
<span>                         Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, </span>
<span>                         seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, </span>
<span>                         subsample <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_segclust</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segclust.html">segclust</a></span><span class="op">(</span><span class="va">simulmode</span>, </span>
<span>                          Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, ncluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>,</span>
<span>                          seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"speed"</span>,<span class="st">"abs_spatial_angle"</span><span class="op">)</span>,</span>
<span>                          subsample <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="automatic-subsampling">Automatic subsampling<a class="anchor" aria-label="anchor" href="#automatic-subsampling"></a>
</h4>
<p>By default subsampling is allowed (<code>subsample = TRUE</code>) and
subsampling will occur if the number of data exceed a threshold (10000
for segmentation, 1000 for segmentation-clustering). The function will
subsample by the lower factor (by 2, 3, 4…) for which the dataset will
fall below the threshold once subsampled. For instance a 2500 rows
dataset for segmentation-clustering would be subsampled by 3 to fall
below 1000 rows. The threshold can be changed through argument
<code>subsample_over</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shiftseg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">simulshift</span>,</span>
<span>                         Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, </span>
<span>                         seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, </span>
<span>                         subsample_over <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_segclust</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segclust.html">segclust</a></span><span class="op">(</span><span class="va">simulmode</span>, </span>
<span>                          Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, ncluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>,</span>
<span>                          seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"speed"</span>,<span class="st">"abs_spatial_angle"</span><span class="op">)</span>,</span>
<span>                          subsample_over <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="manual-subsampling">Manual subsampling<a class="anchor" aria-label="anchor" href="#manual-subsampling"></a>
</h4>
<p>One can also override this automatic subsampling by selecting
directly the subsampling factor through argument
<code>subsample_by</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shiftseg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segmentation.html">segmentation</a></span><span class="op">(</span><span class="va">simulshift</span>,</span>
<span>                         Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, </span>
<span>                         seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, </span>
<span>                         subsample_by <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mode_segclust</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/segclust.html">segclust</a></span><span class="op">(</span><span class="va">simulmode</span>, </span>
<span>                          Kmax <span class="op">=</span> <span class="fl">30</span>, lmin<span class="op">=</span><span class="fl">5</span>, ncluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>,</span>
<span>                          seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"speed"</span>,<span class="st">"abs_spatial_angle"</span><span class="op">)</span>,</span>
<span>                          subsample_by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="consequences-of-subsampling-on-lmin">Consequences of subsampling on <code>lmin</code><a class="anchor" aria-label="anchor" href="#consequences-of-subsampling-on-lmin"></a>
</h3>
<p>Beware that subsampling will also affect your <code>lmin</code>
argument. If subsampling by 2, <code>lmin</code> will be divided by 2.
The function will tell about the value of lmin and its adjustment with
subsampling with different messages:</p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Using <span style="color: #00BB00;">lmin = 240</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Adjusting lmin to subsampling. </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Dividing lmin by 60, with a minimum of 5</span></span></span>
<span><span class="co">#&gt; → After subsampling, <span style="color: #00BB00;">lmin = 5</span>. </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Corresponding to lmin = 300 on the original time scale</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="best-practice-with-subsampling">Best practice with subsampling<a class="anchor" aria-label="anchor" href="#best-practice-with-subsampling"></a>
</h3>
<p>In addition to reducing computation time, subsampling may also help
the algorithm. Considering movement at the scale of hours when looking
for home-ranges at the scale of months may blur the signal and for such
analysis, one data per day may be sufficient. For all analyses, the user
should think about the appropriate temporal resolution, with the idea
that the finest temporal resolution may not always be appropriate.</p>
<p><em>Note that subsampling has been implemented in such way that
outputs will show all points but segmentation is calculated only on
subsampled points. Points used in segmentation can be retrieved through
<code>augment</code> in data column <code>subsample_ind</code> (The
subsample indices for kept points and NA for ignored points).</em></p>
<p><em>Outputs may be more easily explored if subsampling is done before
providing the data to <code>segclust2d</code> functions</em></p>
</div>
</div>
<div class="section level2">
<h2 id="covariate-calculations">Covariate calculations<a class="anchor" aria-label="anchor" href="#covariate-calculations"></a>
</h2>
<p>The package also includes functions in order to calculate unusual
covariates, such as the turning angle at constant step length (here
called <code>spatial_angle</code>, see Patin et al. 2020 for more
details). For the latter, a radius have to be chosen and can be
specified through argument <code>radius</code>. If no radius is
specified, the default one will be the median of the step length
distribution. Other covariates calculated are : persistence and turning
speed (v_p and v_r) from Gurarie et al (2009), distance travelled
between points, speed and smoothed version of the latter. Covariates
dependent on time interval (like speed) are by default calculated with
hours, but you can change this with argument <code>units</code> as in
the example below.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simple_data</span> <span class="op">&lt;-</span> <span class="va">simulmode</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dateTime"</span>,<span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">full_data</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_covariates.html">add_covariates</a></span><span class="op">(</span><span class="va">simple_data</span>, </span>
<span>                              coord.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>, </span>
<span>                              timecol <span class="op">=</span> <span class="st">"dateTime"</span>,</span>
<span>                              smoothed <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              units <span class="op">=</span><span class="st">"min"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">full_data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="advice-on-data-pre-processing">Advice on data pre-processing<a class="anchor" aria-label="anchor" href="#advice-on-data-pre-processing"></a>
</h2>
<p>When pre-processing movement data before segmentation/clustering it
is common to interpolate missing data points. This may however cause
problem if this leads to repetition of values. This can also arise if
the individual has a very stable speed (i.e. a boat or a bird deriving
on the sea) leading to very similar values.</p>
<p>When the repetition of identical or very similar values are longer
than parameter <code>lmin</code>, there are segments with null variance,
which cannot be accounted for by the algorithm. Should such cases arise,
the algorithm will fail and tell you about it:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">500</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/segclust.html">segclust</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>         seg.var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>,<span class="st">"y"</span><span class="op">)</span>,</span>
<span>         lmin <span class="op">=</span> <span class="fl">50</span>, ncluster <span class="op">=</span> <span class="fl">3</span> <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Data have repetition of nearly-identical values longer than lmin. </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">The algorithm cannot estimate variance for segment with repeated values. This is potentially caused by interpolation  of missing values or rounding of values.</span></span></span>
<span><span class="co">#&gt; → Please check for repeated or very similar values of x and y</span></span></code></pre>
<p>To avoid this problem interpolation should be done rather on the
covariates to be segmented rather than the coordinates. Alternatively
small and rare gaps of data could be ignored. If the gap is too large
there is also the possibility to split the dataset.</p>
<p>Dataset with naturally occurring repetition of similar values (a boat
at constant speed) are generally difficult to process with our
segmentation/clustering algorithm.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Remi Patin, Marie-Pierre Etienne, Emilie Lebarbier, Simon Benhamou.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
